!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!e)throw new Error(t)}var o=t.createContext(null),u=t.createContext({static:!1}),i=t.createContext({outlet:null,params:{},pathname:"",basename:"",route:null});function c(e){return p()}function l(e){var r=e.children,i=void 0===r?null:r,c=e.action,l=void 0===c?n.Action.Pop:c,f=e.location,h=e.navigator,p=e.static,v=void 0!==p&&p;return s()&&a(!1),t.createElement(o.Provider,{value:h},t.createElement(u.Provider,{children:i,value:{action:l,location:f,static:v}}))}function s(){return null!=t.useContext(u).location}function f(){return s()||a(!1),t.useContext(u).location}function h(){s()||a(!1);var e=t.useContext(o),n=t.useContext(i).basename,r=f().pathname,u=t.useRef(!1);return t.useEffect((function(){u.current=!0})),t.useCallback((function(t,a){if(void 0===a&&(a={}),u.current)if("number"==typeof t)e.go(t);else{var o=b(t,r,n);(a.replace?e.replace:e.push)(o,a.state)}}),[n,e,r])}function p(){return t.useContext(i).outlet}function v(e){var n=t.useContext(i),r=n.pathname,a=n.basename;return t.useMemo((function(){return b(e,r,a)}),[e,r,a])}function d(e,n,a){void 0===a&&(a="");var o=t.useContext(i),u=(o.route,o.pathname),c=o.params,l=a?S([u,a]):u,s=f(),h=null!=n?n:s,p=t.useMemo((function(){return y(e,h,l)}),[h,e,l]);if(!p)return null;var v={};return p.reduceRight((function(e,n){var o=n.params,u=n.pathname,s=n.route;return v=r({},v,o),t.createElement(i.Provider,{children:s.element,value:{outlet:e,params:r({},c,v),pathname:S([l,u]),basename:a,route:s}})}),null)}function m(e){return e.map((function(e){var n={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||t.createElement(c,null)};return e.children&&(n.children=m(e.children)),n}))}function g(e){var n=[];return t.Children.forEach(e,(function(e){if(t.isValidElement(e))if(e.type!==t.Fragment){var r={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};if(e.props.children){var a=g(e.props.children);a.length&&(r.children=a)}n.push(r)}else n.push.apply(n,g(e.props.children))})),n}function y(e,t,a){void 0===a&&(a=""),"string"==typeof t&&(t=n.parsePath(t));var o=t.pathname||"/";if(a){var u=a.toLowerCase().replace(/^\/*/,"/").replace(/\/+$/,"");if(!o.toLowerCase().startsWith(u))return null;o=o.slice(u.length)||"/"}var i=function e(t,n,a,o,u){void 0===n&&(n=[]);void 0===a&&(a="");void 0===o&&(o=[]);void 0===u&&(u=[]);return t.forEach((function(t,i){t=r({},t,{path:t.path||"/",caseSensitive:!!t.caseSensitive,element:t.element});var c=S([a,t.path]),l=o.concat(t),s=u.concat(i);t.children&&e(t.children,n,c,l,s),n.push([c,l,s])})),n}(e);!function(e){var t=e.reduce((function(e,t){var n=t[0];return e[n]=function(e){var t=e.split("/"),n=t.length;t.some(C)&&(n+=-2);return t.filter((function(e){return!C(e)})).reduce((function(e,t){return e+(x.test(t)?2:""===t?1:10)}),n)}(n),e}),{});n=e,r=function(e,n){var r=e[0],a=e[2],o=t[r],u=n[0],i=n[2],c=t[u];return o!==c?c-o:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}))?e[e.length-1]-t[t.length-1]:0}(a,i)},a=n.slice(0),n.sort((function(e,t){return r(e,t)||a.indexOf(e)-a.indexOf(t)}));var n,r,a}(i);for(var c=null,l=0;null==c&&l<i.length;++l)c=E(i[l],o);return c}var x=/^:\w+$/,C=function(e){return"*"===e};function E(e,t){for(var n=e[1],a="/",o={},u=[],i=0;i<n.length;++i){var c=n[i],l="/"===a?t:t.slice(a.length)||"/",s=R({path:c.path,caseSensitive:c.caseSensitive,end:i===n.length-1},l);if(!s)return null;a=S([a,s.pathname]),o=r({},o,s.params),u.push({route:c,pathname:a,params:o})}return u}function R(e,t){"string"==typeof e&&(e={path:e});var n=e,r=n.path,a=n.caseSensitive,o=void 0!==a&&a,u=n.end,i=function(e,t,n){var r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}))+")";e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)":a+="(.*)",r.push("*")):n&&(a+="\\/?");n&&(a+="$");var o=t?void 0:"i";return[new RegExp(a,o),r]}(r,o,void 0===u||u),c=i[0],l=i[1],s=t.match(c);if(!s)return null;var f=s[1],h=s.slice(2);return{path:r,pathname:f,params:l.reduce((function(e,t,n){return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(h[n]||""),e}),{})}}function b(e,t,r){void 0===t&&(t="/"),void 0===r&&(r="");var a="string"==typeof e?n.parsePath(e):e,o=a.pathname,u=a.search,i=void 0===u?"":u,c=a.hash,l=void 0===c?"":c;return{pathname:o?function(e,t){var n=w((r=t,r.replace(/\/+$/,"")));var r;return w(e).forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?S(n):"/"}(o,o.startsWith("/")?r?P("/"+r):"/":t):t,search:O(i),hash:$(l)}}var P=function(e){return e.replace(/\/\/+/g,"/")},S=function(e){return P(e.join("/"))},w=function(e){return P(e).split("/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},$=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};e.MemoryRouter=function(e){var r=e.children,a=e.initialEntries,o=e.initialIndex,u=t.useRef();null==u.current&&(u.current=n.createMemoryHistory({initialEntries:a,initialIndex:o}));var i=u.current,c=t.useState({action:i.action,location:i.location}),s=c[0],f=c[1];return t.useLayoutEffect((function(){return i.listen(f)}),[i]),t.createElement(l,{children:r,action:s.action,location:s.location,navigator:i})},e.Navigate=function(e){var n=e.to,r=e.replace,o=e.state;s()||a(!1);var u=h();return t.useEffect((function(){u(n,{replace:r,state:o})})),null},e.Outlet=c,e.Route=function(e){var n=e.element;return void 0===n?t.createElement(c,null):n},e.Router=l,e.Routes=function(e){var t=e.basename,n=void 0===t?"":t,r=e.children,a=e.location;return d(g(r),a,n)},e.UNSAFE_LocationContext=u,e.UNSAFE_NavigatorContext=o,e.UNSAFE_RouteContext=i,e.createRoutesFromArray=m,e.createRoutesFromChildren=g,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(function(e,n){return null==t[n]&&a(!1),t[n]})).replace(/\/*\*$/,(function(e){return null==t["*"]?"":t["*"].replace(/^\/*/,"/")}))},e.matchPath=R,e.matchRoutes=y,e.resolvePath=b,e.useBlocker=function(e,n){void 0===n&&(n=!0),s()||a(!1);var u=t.useContext(o);t.useEffect((function(){if(n){var t=u.block((function(n){var a=r({},n,{retry:function(){t(),n.retry()}});e(a)}));return t}}),[u,e,n])},e.useHref=function(e){s()||a(!1);var n=t.useContext(o),r=v(e);return n.createHref(r)},e.useInRouterContext=s,e.useLocation=f,e.useMatch=function(e){return s()||a(!1),R(e,f().pathname)},e.useNavigate=h,e.useOutlet=p,e.useParams=function(){return t.useContext(i).params},e.useResolvedPath=v,e.useRoutes=function(e,n){var r=void 0===n?{}:n,o=r.basename,u=void 0===o?"":o,i=r.location;return s()||a(!1),d(t.useMemo((function(){return m(e)}),[e]),i,u)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
