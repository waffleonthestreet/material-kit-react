import{createContext as e,useRef as t,useState as n,useLayoutEffect as r,createElement as l,useContext as a,useEffect as i,useMemo as c,useCallback as o,Children as u,isValidElement as s,Fragment as p}from"react";import{createMemoryHistory as h,Action as f,parsePath as m}from"history";function d(e,t){if(!e)throw new Error(t)}const g=e(null),v=e({static:!1}),S=e({outlet:null,params:{},pathname:"",basename:"",route:null});function y({children:e,initialEntries:a,initialIndex:i}){let c=t();null==c.current&&(c.current=h({initialEntries:a,initialIndex:i}));let o=c.current,[u,s]=n({action:o.action,location:o.location});return r(()=>o.listen(s),[o]),l(w,{children:e,action:u.action,location:u.location,navigator:o})}function E({to:e,replace:t,state:n}){N()||d(!1);let r=U();return i(()=>{r(e,{replace:t,state:n})}),null}function x(e){return A()}function b({element:e=l(x,null)}){return e}function w({children:e=null,action:t=f.Pop,location:n,navigator:r,static:a=!1}){return N()&&d(!1),l(g.Provider,{value:r},l(v.Provider,{children:e,value:{action:t,location:n,static:a}}))}function $({basename:e="",children:t,location:n}){return _(j(t),n,e)}function C(e,t=!0){N()||d(!1);let n=a(g);i(()=>{if(!t)return;let r=n.block(t=>{let n={...t,retry(){r(),t.retry()}};e(n)});return r},[n,e,t])}function W(e){N()||d(!1);let t=a(g),n=I(e);return t.createHref(n)}function N(){return null!=a(v).location}function P(){return N()||d(!1),a(v).location}function R(e){return N()||d(!1),D(e,P().pathname)}function U(){N()||d(!1);let e=a(g),{basename:n}=a(S),{pathname:r}=P(),l=t(!1);return i(()=>{l.current=!0}),o((t,a={})=>{if(l.current)if("number"==typeof t)e.go(t);else{let l=G(t,r,n);(a.replace?e.replace:e.push)(l,a.state)}},[n,e,r])}function A(){return a(S).outlet}function F(){return a(S).params}function I(e){let{pathname:t,basename:n}=a(S);return c(()=>G(e,t,n),[e,t,n])}function L(e,{basename:t="",location:n}={}){return N()||d(!1),_(c(()=>O(e),[e]),n,t)}function _(e,t,n=""){let{route:r,pathname:i,params:o}=a(S),u=n?K([i,n]):i,s=P(),p=null!=t?t:s,h=c(()=>H(e,p,u),[p,e,u]);if(!h)return null;let f={};return h.reduceRight((e,{params:t,pathname:r,route:a})=>(f={...f,...t},l(S.Provider,{children:a.element,value:{outlet:e,params:{...o,...f},pathname:K([u,r]),basename:n,route:a}})),null)}function O(e){return e.map(e=>{let t={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||l(x,null)};return e.children&&(t.children=O(e.children)),t})}function j(e){let t=[];return u.forEach(e,e=>{if(!s(e))return;if(e.type===p)return void t.push.apply(t,j(e.props.children));let n={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};if(e.props.children){let t=j(e.props.children);t.length&&(n.children=t)}t.push(n)}),t}function k(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&d(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function H(e,t,n=""){"string"==typeof t&&(t=m(t));let r=t.pathname||"/";if(n){let e=n.toLowerCase().replace(/^\/*/,"/").replace(/\/+$/,"");if(!r.toLowerCase().startsWith(e))return null;r=r.slice(e.length)||"/"}let l=function e(t,n=[],r="",l=[],a=[]){return t.forEach((t,i)=>{t={...t,path:t.path||"/",caseSensitive:!!t.caseSensitive,element:t.element};let c=K([r,t.path]),o=l.concat(t),u=a.concat(i);t.children&&e(t.children,n,c,o,u),n.push([c,o,u])}),n}(e);!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=e.split("/"),n=t.length;t.some(z)&&(n+=-2);return t.filter(e=>!z(e)).reduce((e,t)=>e+(q.test(t)?2:""===t?1:10),n)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,l]=e,a=t[r],[i,,c]=n,o=t[i];return a!==o?o-a:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,c)})}(l);let a=null;for(let i=0;null==a&&i<l.length;++i)a=B(l[i],r);return a}const q=/^:\w+$/,z=e=>"*"===e;function B(e,t){let n=e[1],r="/",l={},a=[];for(let i=0;i<n.length;++i){let e=n[i],c="/"===r?t:t.slice(r.length)||"/",o=D({path:e.path,caseSensitive:e.caseSensitive,end:i===n.length-1},c);if(!o)return null;r=K([r,o.pathname]),l={...l,...o.params},a.push({route:e,pathname:r,params:l})}return a}function D(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:l=!0}=e,[a,i]=function(e,t,n){let r=[],l="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";e.endsWith("*")?(e.endsWith("/*")?l+="(?:\\/(.+)|\\/?)":l+="(.*)",r.push("*")):n&&(l+="\\/?");n&&(l+="$");let a=t?void 0:"i";return[new RegExp(l,a),r]}(n,r,l),c=t.match(a);if(!c)return null;let o=c[1],u=c.slice(2);return{path:n,pathname:o,params:i.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(u[n]||""),e),{})}}function G(e,t="/",n=""){let{pathname:r,search:l="",hash:a=""}="string"==typeof e?m(e):e;return{pathname:r?function(e,t){let n=M((r=t,r.replace(/\/+$/,"")));var r;return M(e).forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?K(n):"/"}(r,r.startsWith("/")?n?J("/"+n):"/":t):t,search:Q(l),hash:T(a)}}const J=e=>e.replace(/\/\/+/g,"/"),K=e=>J(e.join("/")),M=e=>J(e).split("/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",T=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";export{y as MemoryRouter,E as Navigate,x as Outlet,b as Route,w as Router,$ as Routes,v as UNSAFE_LocationContext,g as UNSAFE_NavigatorContext,S as UNSAFE_RouteContext,O as createRoutesFromArray,j as createRoutesFromChildren,k as generatePath,D as matchPath,H as matchRoutes,G as resolvePath,C as useBlocker,W as useHref,N as useInRouterContext,P as useLocation,R as useMatch,U as useNavigate,A as useOutlet,F as useParams,I as useResolvedPath,L as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
